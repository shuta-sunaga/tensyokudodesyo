{
  "permissions": {
    "allow": [
      "Bash(npx miyabi)",
      "Bash(npx miyabi --help:*)",
      "Bash(npx miyabi agent --help:*)",
      "Bash(npx miyabi status:*)",
      "Bash(npx miyabi:*)",
      "Bash(git init:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git config:*)",
      "Bash(gh repo create:*)",
      "Bash(git rm:*)",
      "Bash(git push:*)",
      "Bash(gh issue view:*)",
      "WebSearch",
      "WebFetch(domain:tensyokudodesyo.com)",
      "Bash(git checkout:*)",
      "Bash(gh pr create:*)",
      "Bash(git restore:*)",
      "WebFetch(domain:www.line.me)",
      "Bash(gh issue create:*)",
      "Bash(gh issue comment:*)",
      "Bash(npx serve -p 3000)",
      "Bash(curl:*)",
      "Bash(npx http-server -p 8080 --cors)",
      "Bash(powershell -Command \"Set-Location -Path ''C:\\\\Users\\\\shuta\\\\Documents\\\\dev\\\\tensyokudodesyo\\\\public_html''; python -m http.server 8080\")",
      "Bash(powershell -Command \"Remove-Item -Path ''C:\\\\Users\\\\shuta\\\\Documents\\\\dev\\\\tensyokudodesyo\\\\public_html\\\\jobs.html'' -Force\")",
      "Bash(npx serve -l 3000)",
      "Bash(for:*)",
      "Bash(do sed -i 's|href=\"\"../../interviews.html\"\"|href=\"\"../../interviews.html?prefecture=shizuoka\"\"|g; s|href=\"\"../../companies.html\"\"|href=\"\"../../companies.html?prefecture=shizuoka\"\"|g' \"$f\")",
      "Bash(done)",
      "Bash(do sed -i 's|href=\"\"../../interviews.html\"\"|href=\"\"../../interviews.html?prefecture=shiga\"\"|g; s|href=\"\"../../companies.html\"\"|href=\"\"../../companies.html?prefecture=shiga\"\"|g' \"$f\")",
      "Bash(npx serve --help:*)",
      "Bash(findstr:*)",
      "WebFetch(domain:13.230.204.170)",
      "Bash(find:*)",
      "Skill(miyabi-status)",
      "Bash(gh issue list:*)",
      "Bash(gh pr list:*)",
      "Bash(gh issue close:*)",
      "Bash(where:*)",
      "Bash(npx --yes svg2png-wasm:*)",
      "Bash(npx --yes @aspect-build/svg2png:*)",
      "Bash(npx --yes resvg-js-cli:*)",
      "Bash(npm init:*)",
      "Bash(npm install:*)",
      "Bash(node scripts/convert-ogp.mjs:*)",
      "Bash(dir public_htmlassetsogp.*)",
      "Bash(ls:*)",
      "Bash(grep:*)",
      "WebFetch(domain:note.com)",
      "Bash(gh issue edit 8 --body \"$\\(cat <<''EOF''\n## 概要\n\n転職インタビュー・企業インタビュー・転職ノウハウの詳細ページをMovable Type（MT）のコンテンツタイプで実装する。\n\n## 背景\n\n- 現在、上記3コンテンツは一覧ページのみ実装済み\n- 詳細ページはnoteへの外部リンク → **廃止**\n- 今後はMTのコンテンツタイプで自社サイト内に詳細ページを構築\n\n## 要件\n\n### 基本方針\n- 既存の一覧ページ機能（フィルタ機能等）は変更なし\n- 一覧ページの導線を詳細ページへのリンクに変更\n- MTコンテンツタイプから詳細ページを自動生成\n\n### 対象コンテンツタイプ（3種類）\n1. **転職インタビュー** - 転職成功者の体験談\n2. **企業インタビュー** - 採用企業の魅力・社風\n3. **転職ノウハウ** - 転職活動のコツ・ノウハウ記事\n\n### MovableType環境\n- **バージョン**: 9.0.5\n\n---\n\n## コンテンツタイプ フィールド設計\n\n### 共通フィールド構成\n\n| フィールド名 | フィールドタイプ | 説明 |\n|-------------|----------------|------|\n| タイトル | 単行テキスト | 記事タイトル（H1） |\n| サムネイル画像 | アセット（画像） | アイキャッチ画像 |\n| カテゴリ | 選択（カテゴリ連携） | 記事カテゴリ |\n| エリア | 選択 | 都道府県 |\n| 公開日 | 日付 | 記事公開日 |\n| H2見出し | 単行テキスト | メインセクション見出し |\n| H2サムネイル画像 | アセット（画像） | H2見出し上に表示する画像 |\n| 本文セクション | **繰り返しフィールド** | 下記参照 |\n\n### 繰り返しフィールド「本文セクション」の構成\n\n| サブフィールド | フィールドタイプ | 説明 |\n|---------------|----------------|------|\n| H3見出し | 単行テキスト | セクション見出し |\n| 本文 | 複数行テキスト（リッチテキスト） | セクション本文 |\n\n### ブロックエディタ使用箇所\n- **本文**フィールドで使用\n- 使用ブロック: **見出し（H4以下）**、**段落** のみ\n\n---\n\n## 詳細ページ構成\n\n### ページ構造（noteを参考）\n\n```\n┌─────────────────────────────────────┐\n│ パンくずリスト                        │\n├─────────────────────────────────────┤\n│ [サムネイル画像]                      │\n├─────────────────────────────────────┤\n│ H1: 記事タイトル                      │\n│ カテゴリ | エリア | 公開日             │\n├─────────────────────────────────────┤\n│ 目次（H3見出しから自動生成）           │\n│ ├ H3見出し1                          │\n│ ├ H3見出し2                          │\n│ └ H3見出し3                          │\n├─────────────────────────────────────┤\n│ [H2サムネイル画像]                    │\n│ H2: メインセクション見出し             │\n├─────────────────────────────────────┤\n│ H3: セクション見出し1                  │\n│ 本文テキスト...                       │\n├─────────────────────────────────────┤\n│ H3: セクション見出し2                  │\n│ 本文テキスト...                       │\n├─────────────────────────────────────┤\n│ （繰り返し）                          │\n├─────────────────────────────────────┤\n│ 関連記事 / CTA                        │\n├─────────────────────────────────────┤\n│ フッター                              │\n└─────────────────────────────────────┘\n```\n\n---\n\n## 参考資料\n\n### 既存noteコンテンツ例\nhttps://note.com/tensyokudodesyo/n/n72c9584ca63c\n\n---\n\n## タスク\n\n### Phase 1: 設計・仕様書作成\n- [ ] コンテンツタイプフィールド定義書\n- [ ] 詳細ページHTML/CSS設計\n- [ ] MTテンプレート設計\n\n### Phase 2: MTテンプレート実装\n- [ ] 転職インタビュー詳細ページテンプレート（`interview-detail.mtml`）\n- [ ] 企業インタビュー詳細ページテンプレート（`company-detail.mtml`）\n- [ ] 転職ノウハウ詳細ページテンプレート（`knowhow-detail.mtml`）\n- [ ] 目次自動生成ロジック\n\n### Phase 3: 一覧ページ連携\n- [ ] 一覧ページのdetailUrlをMT出力パスに変更\n- [ ] JSONデータからnoteリンク削除\n\n### Phase 4: スタイリング\n- [ ] 詳細ページ用CSS実装\n- [ ] レスポンシブ対応（PC/SP）\n- [ ] 目次スタイル\n- [ ] ブロックエディタ出力スタイル\n\n---\n\n## 各コンテンツタイプ固有フィールド\n\n### 転職インタビュー\n| フィールド | 説明 |\n|-----------|------|\n| 企業名 | 転職先企業名 |\n| 職種（前） | 転職前の職種 |\n| 職種（後） | 転職後の職種 |\n\n### 企業インタビュー\n| フィールド | 説明 |\n|-----------|------|\n| 企業名 | 企業名 |\n| 業界 | 業界カテゴリ |\n| 従業員数 | 会社規模 |\n\n### 転職ノウハウ\n| フィールド | 説明 |\n|-----------|------|\n| （共通フィールドのみ） | - |\n\n---\n\n## 出力ファイル構成\n\n```\n/interviews/\n  └ {記事スラッグ}.html    ← 転職インタビュー詳細\n\n/companies/\n  └ {記事スラッグ}.html    ← 企業インタビュー詳細\n\n/knowhow/\n  └ {記事スラッグ}.html    ← 転職ノウハウ詳細\n```\n\n---\n\n**Labels**: `type: feature`, `priority: P1-High`, `complexity: large`\nEOF\n\\)\")",
      "Bash(gh issue edit 8 --body \"$\\(cat <<''EOF''\n## 概要\n\n転職インタビュー・企業インタビュー・転職ノウハウの詳細ページをMovable Type（MT）のコンテンツタイプで実装する。\n\n## 背景\n\n- 現在、上記3コンテンツは一覧ページのみ実装済み\n- 詳細ページはnoteへの外部リンク → **廃止**\n- 今後はMTのコンテンツタイプで自社サイト内に詳細ページを構築\n\n## 要件\n\n### 基本方針\n- 既存の一覧ページ機能（フィルタ機能等）は変更なし\n- 一覧ページの導線を詳細ページへのリンクに変更\n- MTコンテンツタイプから詳細ページを自動生成\n\n### 対象コンテンツタイプ（3種類）\n1. **転職インタビュー** - 転職成功者の体験談\n2. **企業インタビュー** - 採用企業の魅力・社風\n3. **転職ノウハウ** - 転職活動のコツ・ノウハウ記事\n\n### MovableType環境\n- **バージョン**: 9.0.5\n\n---\n\n## コンテンツタイプ フィールド設計\n\n### 共通フィールド構成\n\n| フィールド名 | フィールドタイプ | 説明 |\n|-------------|----------------|------|\n| タイトル | 単行テキスト | 記事タイトル（H1） |\n| サムネイル画像 | アセット（画像） | アイキャッチ画像 |\n| カテゴリ | 選択（カテゴリ連携） | 記事カテゴリ |\n| エリア | 選択 | 都道府県 |\n| 公開日 | 日付 | 記事公開日 |\n| H2見出し | 単行テキスト | メインセクション見出し |\n| H2サムネイル画像 | アセット（画像） | H2見出し上に表示する画像 |\n| 本文 | **ブロックエディタ** | 記事本文（H3見出し+段落で構成） |\n\n### ブロックエディタ設定\n\n#### 使用ブロック\n| ブロックタイプ | 用途 | 備考 |\n|--------------|------|------|\n| 見出し（H3） | セクション見出し | 目次生成の対象 |\n| 段落 | 本文テキスト | 通常のテキスト |\n\n#### ブロックエディタの入力イメージ\n```\n[H3] セクション見出し1\n[段落] 本文テキスト...\n[段落] 本文テキスト...\n\n[H3] セクション見出し2\n[段落] 本文テキスト...\n\n[H3] セクション見出し3\n[段落] 本文テキスト...\n```\n\n---\n\n## 目次機能仕様\n\n### 目次の生成ルール\n- ブロックエディタ出力内の **H3タグ** をJavaScriptで抽出\n- 抽出したH3から目次を動的生成\n- 各H3に自動でid属性を付与（`section-1`, `section-2`...）\n\n### 目次の動作\n- 目次項目をタップ → 該当H3見出しまで**スムーススクロール**\n- ヘッダー固定分のオフセット考慮\n\n### 実装方法\n\n#### MTテンプレート側\n```html\n<!-- 目次（空のコンテナ、JSで生成） -->\n<nav class=\"article-toc\">\n  <h2 class=\"toc-title\">目次</h2>\n  <ol class=\"toc-list\" id=\"tocList\">\n    <!-- JavaScriptで動的生成 -->\n  </ol>\n</nav>\n\n<!-- 本文（ブロックエディタ出力） -->\n<div class=\"article-body\" id=\"articleBody\">\n  <mt:ContentFieldValue field_name=\"本文\">\n</div>\n```\n\n#### JavaScript側（目次生成 + スムーススクロール）\n```javascript\ndocument.addEventListener\\(''DOMContentLoaded'', function\\(\\) {\n  const articleBody = document.getElementById\\(''articleBody''\\);\n  const tocList = document.getElementById\\(''tocList''\\);\n  \n  if \\(!articleBody || !tocList\\) return;\n  \n  // H3タグを取得してidを付与 & 目次生成\n  const h3Tags = articleBody.querySelectorAll\\(''h3''\\);\n  \n  h3Tags.forEach\\(\\(h3, index\\) => {\n    const sectionId = ''section-'' + \\(index + 1\\);\n    h3.id = sectionId;\n    \n    // 目次項目を追加\n    const li = document.createElement\\(''li''\\);\n    const a = document.createElement\\(''a''\\);\n    a.href = ''#'' + sectionId;\n    a.textContent = h3.textContent;\n    a.classList.add\\(''toc-link''\\);\n    li.appendChild\\(a\\);\n    tocList.appendChild\\(li\\);\n  }\\);\n  \n  // スムーススクロール\n  document.querySelectorAll\\(''.toc-link''\\).forEach\\(link => {\n    link.addEventListener\\(''click'', function\\(e\\) {\n      e.preventDefault\\(\\);\n      const targetId = this.getAttribute\\(''href''\\).substring\\(1\\);\n      const target = document.getElementById\\(targetId\\);\n      if \\(target\\) {\n        const headerHeight = document.querySelector\\(''.header''\\)?.offsetHeight || 80;\n        const targetPosition = target.getBoundingClientRect\\(\\).top + window.pageYOffset - headerHeight - 20;\n        window.scrollTo\\({ top: targetPosition, behavior: ''smooth'' }\\);\n      }\n    }\\);\n  }\\);\n  \n  // 目次が空の場合は非表示\n  if \\(h3Tags.length === 0\\) {\n    document.querySelector\\(''.article-toc''\\)?.style.display = ''none'';\n  }\n}\\);\n```\n\n---\n\n## 詳細ページ構成\n\n### ページ構造（noteを参考）\n\n```\n┌─────────────────────────────────────┐\n│ パンくずリスト                        │\n├─────────────────────────────────────┤\n│ [サムネイル画像]                      │\n├─────────────────────────────────────┤\n│ H1: 記事タイトル                      │\n│ カテゴリ | エリア | 公開日             │\n├─────────────────────────────────────┤\n│ 目次（H3から動的生成）                 │\n│ ├ 1. H3見出し1  ← タップでスクロール   │\n│ ├ 2. H3見出し2  ← タップでスクロール   │\n│ └ 3. H3見出し3  ← タップでスクロール   │\n├─────────────────────────────────────┤\n│ [H2サムネイル画像]                    │\n│ H2: メインセクション見出し             │\n├─────────────────────────────────────┤\n│ 【ブロックエディタ出力】               │\n│                                     │\n│ H3: セクション見出し1  ← id=\"section-1\"│\n│ 本文テキスト...                       │\n│                                     │\n│ H3: セクション見出し2  ← id=\"section-2\"│\n│ 本文テキスト...                       │\n│                                     │\n│ （ブロックエディタで自由に追加）        │\n├─────────────────────────────────────┤\n│ 関連記事 / LINE CTA                   │\n├─────────────────────────────────────┤\n│ フッター                              │\n└─────────────────────────────────────┘\n```\n\n---\n\n## 参考資料\n\n### 既存noteコンテンツ例\nhttps://note.com/tensyokudodesyo/n/n72c9584ca63c\n\n---\n\n## タスク\n\n### Phase 1: 設計・仕様書作成\n- [ ] コンテンツタイプフィールド定義書\n- [ ] ブロックエディタ設定手順書\n- [ ] 詳細ページHTML/CSS設計\n- [ ] MTテンプレート設計\n\n### Phase 2: MTテンプレート実装\n- [ ] 転職インタビュー詳細ページテンプレート（`interview-detail.mtml`）\n- [ ] 企業インタビュー詳細ページテンプレート（`company-detail.mtml`）\n- [ ] 転職ノウハウ詳細ページテンプレート（`knowhow-detail.mtml`）\n- [ ] 目次生成JavaScript実装（`article-toc.js`）\n\n### Phase 3: 一覧ページ連携\n- [ ] 一覧ページのdetailUrlをMT出力パスに変更\n- [ ] JSONデータからnoteリンク削除\n\n### Phase 4: スタイリング\n- [ ] 詳細ページ用CSS実装\n- [ ] 目次スタイル（番号付きリスト、ホバー効果）\n- [ ] ブロックエディタ出力スタイル（H3、段落）\n- [ ] レスポンシブ対応（PC/SP）\n\n---\n\n## 各コンテンツタイプ固有フィールド\n\n### 転職インタビュー\n| フィールド | 説明 |\n|-----------|------|\n| 企業名 | 転職先企業名 |\n| 職種（前） | 転職前の職種 |\n| 職種（後） | 転職後の職種 |\n\n### 企業インタビュー\n| フィールド | 説明 |\n|-----------|------|\n| 企業名 | 企業名 |\n| 業界 | 業界カテゴリ |\n| 従業員数 | 会社規模 |\n\n### 転職ノウハウ\n| フィールド | 説明 |\n|-----------|------|\n| （共通フィールドのみ） | - |\n\n---\n\n## 出力ファイル構成\n\n```\n/interviews/\n  └ {記事スラッグ}.html    ← 転職インタビュー詳細\n\n/companies/\n  └ {記事スラッグ}.html    ← 企業インタビュー詳細\n\n/knowhow/\n  └ {記事スラッグ}.html    ← 転職ノウハウ詳細\n```\n\n---\n\n**Labels**: `type: feature`, `priority: P1-High`, `complexity: large`\nEOF\n\\)\")",
      "WebFetch(domain:www.movabletype.jp)"
    ]
  }
}
